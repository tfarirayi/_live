<!--
Main application container element
@tfarirayi1
-->
<!-- Dependencies -->
<!-- Polymer dependency -->
<link rel="import" href="../bower_components/polymer/polymer.html">
<!-- App elements -->
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<!-- Iron elements -->
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<!-- Paper elements -->
<link rel="import" href="../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-styles/shadow.html">
<!-- Google fonts -->
<link href='//fonts.googleapis.com/css?family=Arvo|Space+Mono|Roboto|Source+Code+Pro' rel='stylesheet'>
<!-- Custom elements -->
<link rel="import" href="my-icons.html">

<dom-module id="my-app">
<template>
    <style>
        :host {
            @apply(--layout-fullbleed);
            @apply(--layout-vertical);
        }

        app-header-layout {
    
        }

        app-header {
            @apply(--shadow-elevation-4dp);
            height: 112px;
            color: #212121;
            border-radius: 0px 0px 16px 16px;
            background-color: #CFD8DC;
            --app-header-background-rear-layer: {
                /* The header is blue when condensed */
                background-color: blue;
            };
        }

        .main-title {
            line-height: 120%;
        }
        
        paper-button, a {
            color: inherit;
            font-family: 'Space Mono', monospace;
            font-size: 18px;
            padding: 0px;
            text-align: center;
            text-decoration: none;
            text-transform: none;
        }

        paper-button:focus, a:focus {
            font-weight: normal;
            text-decoration: none;
        }

        app-toolbar.top-bar {
            height: 50px;
            @apply(--layout-horizontal);
            @apply(--layout-center-justified);
        }

        app-toolbar.bottom-bar {
            height: 52px;
            @apply(--layout-horizontal);
            @apply(--layout-start);
            @apply(--layout-center-justified);
        }
    </style>
<!-- Local dom here -->
    <!-- Routing -->
    <app-location route="{{route}}"></app-location>
    <app-route
        route="{{route}}"
        pattern="/:page"
        data="{{routeData}}"
        tail="{{tail}}">
    </app-route>

    <!-- Header -->
    <!--<paper-scroll-header-panel id="header" no-reveal scroll-away-topbar keep-condensed-header condensed-header-height="51">-->

            <app-header-layout id="header" fullbleed>
                <app-header condenses fixed>
                <!-- Toolbar -->
                <!--<paper-toolbar bottom-justify="center" justify="center">-->
                <app-toolbar class="top-bar" >
                    <paper-icon-button icon="my-icons:phone-iphone"></paper-icon-button>
                    <paper-icon-button icon="my-icons:mail"></paper-icon-button>
                    <paper-icon-button icon="my-icons:info-outline"></paper-icon-button>
                </app-toolbar>
                <app-toolbar class="bottom-bar" sticky>
                    <div class="bottom main-title">
                        <a href="/home" tabindex="-1">
                            <paper-button noink>Orange House<br>WEB-DEV</paper-button>
                        </a>
                    </div>
                </app-toolbar>
                <!--</paper-toolbar>-->
                </app-header>

                    <iron-pages id="content"
                        attr-for-selected="id" 
                        fallback-selection="home" 
                        selected="[[page]]">

                        <home-page id="home" unresolved></home-page>
                        <ebooking-page id="ebooking" unresolved></ebooking-page>
                        <eshop-page id="eshop" unresolved></eshop-page>
                        <regular-web id="regular" unresolved></regular-web>
                        
                    </iron-pages>

                    <div>
                        <br><br><br><br><br><br><br><br><br><br>
                    </div>
            </app-header-layout>

    <!--</paper-scroll-header-panel>-->

</template>
    <script>
        Polymer ({
            is: 'my-app',

            properties: {

                page: {
                    type: String,
                    reflectToAttribute: true,
                    observer: '_pageChanged'
                }

            },

            observers: [
                '_routePageChanged(routeData.page)'
            ],

            created: function() {
                this.removeAttribute('unresolved');
            },

            _pageChanged: function(page) {
                var resolvedPageUrl = this.resolveUrl(page + '-page.html');
                this.importHref(resolvedPageUrl, null, this._show404, true);
                // Scroll to top on page change
                this.$.header.scroll(0, true);
            },

            _routePageChanged: function(page) {
                // Set to home page if page is undefined
                this.page = page || 'home';
            },

            _show404: function() {
                this.page = 'home';
            }

        });
    </script>
</dom-module>
