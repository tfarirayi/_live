<!--
Main application container element
@tfarirayi1
-->
<!-- Dependencies -->
<!-- Polymer dependency -->
<link rel="import" href="../bower_components/polymer/polymer.html">
<!-- App elements -->
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<!-- Iron elements -->
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<!-- Neon Animation -->
<link rel="import" href="../bower_components/neon-animation/neon-animated-pages.html">
<!-- Paper elements -->
<link rel="import" href="../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-badge/paper-badge.html">
<link rel="import" href="../bower_components/paper-styles/shadow.html">
<!-- Google fonts -->
<link href='//fonts.googleapis.com/css?family=Arvo|Space+Mono|Raleway|Roboto|Source+Code+Pro' rel='stylesheet'>
<!-- Custom elements -->
<link rel="import" href="my-icons.html">
<link rel="import" href="my-styles.html">

<dom-module id="my-app">
<template>
    <style include="my-styles">
        :host {
            @apply(--layout-fullbleed);
            @apply(--layout-vertical);
        }

        app-header {
            height: 112px;
            color: rgba(55,71,79 ,1);
            border-radius: 0px 0px 56px 56px;
            background-color: rgba(207,216,220 ,0.9);
            @apply(--shadow-elevation-4dp);
        }
       
        paper-button.home-button, a {
            color: inherit;
            font-family: 'Space Mono', monospace;
            font-size: 18px;
            padding: 0px;
            text-align: center;
            text-decoration: none;
            text-transform: none;
        }

        paper-button.home-button {
            @apply(--layout-vertical);  
        }
        
        paper-button.home-button:focus, a:focus {
            font-weight: normal;
            text-decoration: none;
        }

        app-toolbar.top-bar {
            color: rgba(38,50,56 ,1);
            height: 60px;
            text-shadow: 1px 1px rgba(255,138,101 ,1);
            @apply(--layout-horizontal);
            @apply(--layout-end);
            @apply(--layout-center-justified);
        }

        .main-title {
            line-height: 120%;
        }

        app-toolbar.bottom-bar {
            height: 52px;
            @apply(--layout-horizontal);
            @apply(--layout-center);
            @apply(--layout-center-justified);
        }
    </style>
    <!-- Local dom here -->
        <!-- Routing -->
        <app-location route="{{route}}"></app-location>
        <app-route
            route="{{route}}"
            pattern="/:page"
            data="{{routeData}}"
            tail="{{tail}}">
        </app-route>

            <!-- Header Layout Container -->
            <app-header-layout effects="blend-background" fullbleed>
                <app-header id="header" condenses fixed>
                <!-- Toolbar Top -->
                <app-toolbar class="top-bar" >
                    <div class="bottom main-title">
                        <a href="/home" tabindex="-1">
                            <paper-button class="home-button" noink><span class="logo">Orange House</span><span class="logo">WEB-DEV </span></paper-button>
                        </a>
                    </div>
                </app-toolbar>
                <!-- Toolbar Bottom -->
                <app-toolbar class="bottom-bar" sticky>
                    <paper-icon-button icon="my-icons:info-outline"></paper-icon-button>
                    <paper-icon-button icon="my-icons:phone-iphone"></paper-icon-button>
                    <paper-icon-button icon="my-icons:mail"></paper-icon-button>
                </app-toolbar>
                </app-header>

                    <!-- Routing Display -->
                    <iron-pages id="content"
                        attr-for-selected="id" 
                        fallback-selection="home" 
                        selected="[[page]]">

                        <home-page id="home"></home-page>
                        <ebooking-page id="ebooking"></ebooking-page>
                        <eshop-page id="eshop"></eshop-page>
                        <regular-web id="regular"></regular-web>
                        
                    </iron-pages>
                    <!-- Push footer to bottom --> 
                    <span class="spacer"></span>
                    <div class="my-footer">
                        &copy; [[year]] Orange House Web Development&trade;
                         
                    </div>
            </app-header-layout>

</template>
    <script>
        Polymer ({
            is: 'my-app',

            properties: {

                page: {
                    type: String,
                    reflectToAttribute: true,
                    observer: '_pageChanged'
                },

                year: {
                    type: String,
                    value: function() {
                        var date = new Date();
                        return date.getFullYear();
                    }
                }
            },

            observers: [
                '_routePageChanged(routeData.page)'
            ],

            created: function() {
                Polymer.RenderStatus.afterNextRender(this, function() {
                    this.importHref(this.resolveUrl('lazy-resources.html'), null, null, true);
                });
            },

            _pageChanged: function(page) {
                var resolvedPageUrl = this.resolveUrl(page + '-page.html');
                this.importHref(resolvedPageUrl, null, this._show404, true);
                // Scroll to top on page change
                this.$.header.scroll({top: 0});
            },

            _routePageChanged: function(page) {
                // Set to home page if page is undefined
                this.page = page || 'home';
            },

            _show404: function() {
                this.page = 'home';
            }

        });
    </script>
</dom-module>
